DROP TABLE IF EXISTS author_submissions;

CREATE TABLE author_submissions (
  -- Meta --
  id INT NOT NULL,
  created_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
  updated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,

  -- Submission data --
  user_id INT NOT NULL,
  submission_type ENUM('new', 'update') NOT NULL,
  related_resource VARCHAR(500), -- For update submissions, value = original book slug
  review_status ENUM('approved', 'pending', 'rejected') NOT NULL DEFAULT 'pending',
  reviewer_id INT,
  reviewer_comment TEXT,
  reviewed_at TIMESTAMP,
  
  -- Book data --
  author_name VARCHAR(255) NOT NULL,
  date_of_birth DATE,
  date_of_death DATE,
  author_image_url VARCHAR(255),
  biography TEXT,

  PRIMARY KEY (id)
)